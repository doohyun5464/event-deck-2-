<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>í–‰ì‚¬ ì»¨íŠ¸ë¡¤ íŒ¨ë„</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #05070b;
      --card-bg: #151821;
      --accent: #3ea6ff;
      --accent-soft: #1b2738;
      --text-main: #f8f9ff;
      --text-sub: #99a1b8;
    }

    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      margin: 0;
      min-height: 100vh;
      background: radial-gradient(circle at top, #151821 0, #05070b 55%, #000 100%);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color: var(--text-main);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .app {
      width: min(1100px, 100vw - 32px);
      padding: 20px;
      border-radius: 24px;
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.04), rgba(0, 0, 0, 0.7));
      box-shadow:
        0 20px 50px rgba(0, 0, 0, 0.85),
        0 0 0 1px rgba(255, 255, 255, 0.03);
      backdrop-filter: blur(18px);
    }

    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 18px;
    }

    .title-block {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .title {
      font-size: 20px;
      font-weight: 650;
      letter-spacing: 0.01em;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .title-badge {
      font-size: 11px;
      padding: 2px 8px;
      border-radius: 999px;
      background: rgba(62, 166, 255, 0.12);
      color: var(--accent);
      border: 1px solid rgba(62, 166, 255, 0.65);
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .subtitle {
      font-size: 13px;
      color: var(--text-sub);
    }

    .controls {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .pill {
      border-radius: 999px;
      padding: 3px 10px;
      font-size: 11px;
      color: var(--text-sub);
      background: rgba(0, 0, 0, 0.55);
      border: 1px solid rgba(255, 255, 255, 0.06);
    }

    .toggle-edit {
      cursor: pointer;
      border: none;
      outline: none;
      border-radius: 999px;
      padding: 8px 14px;
      font-size: 13px;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      color: var(--text-main);
      background: radial-gradient(circle at top left, #3ea6ff, #2b5e96);
      box-shadow:
        0 8px 18px rgba(0, 0, 0, 0.8),
        0 0 0 1px rgba(174, 213, 255, 0.4);
      transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.12s ease;
    }

    .toggle-edit:hover {
      transform: translateY(-1px);
      filter: brightness(1.05);
      box-shadow:
        0 11px 24px rgba(0, 0, 0, 0.9),
        0 0 0 1px rgba(174, 213, 255, 0.6);
    }

    .toggle-edit:active {
      transform: translateY(1px) scale(0.99);
      box-shadow:
        0 4px 10px rgba(0, 0, 0, 0.9),
        0 0 0 1px rgba(174, 213, 255, 0.7);
    }

    .toggle-edit[data-active="true"] {
      background: radial-gradient(circle at top left, #ffb74d, #ff7043);
      box-shadow:
        0 8px 18px rgba(0, 0, 0, 0.8),
        0 0 0 1px rgba(255, 224, 178, 0.7);
    }

    .deck {
      display: grid;
      grid-template-columns: repeat(5, minmax(0, 1fr));
      gap: 16px;
      margin-top: 8px;
    }

    @media (max-width: 800px) {
      .deck {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    @media (max-width: 480px) {
      .deck {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    .deck-button {
      position: relative;
      aspect-ratio: 1 / 1;
      border-radius: 20px;
      background: radial-gradient(circle at 30% 20%, rgba(255, 255, 255, 0.22), transparent 55%),
                  radial-gradient(circle at bottom, rgba(62, 166, 255, 0.6), rgba(5, 7, 11, 1));
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow:
        0 14px 0 rgba(0, 0, 0, 0.9),
        0 18px 28px rgba(0, 0, 0, 0.9),
        0 0 0 1px rgba(255, 255, 255, 0.04);
      transform: translateY(0);
      transition:
        transform 0.08s ease,
        box-shadow 0.08s ease,
        filter 0.08s ease,
        background 0.12s ease;
      overflow: hidden;
    }

    .deck-button-inner {
      width: 82%;
      height: 82%;
      border-radius: 18px;
      background: radial-gradient(circle at top, rgba(255, 255, 255, 0.06), rgba(0, 0, 0, 0.9));
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 6px;
    }

    .deck-button-label {
      text-align: center;
      font-size: 14px;
      font-weight: 500;
      line-height: 1.3;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.85);
      word-break: keep-all;
    }

    .deck-button-empty .deck-button-label {
      font-size: 12px;
      color: rgba(240, 240, 255, 0.7);
    }

    .deck-button[data-has-url="false"] {
      background: radial-gradient(circle at 20% 10%, rgba(255, 255, 255, 0.12), transparent 55%),
                  radial-gradient(circle at bottom, rgba(63, 81, 181, 0.5), rgba(5, 7, 11, 1));
    }

    .deck-button-pressed {
      transform: translateY(6px) scale(0.97);
      box-shadow:
        0 5px 0 rgba(0, 0, 0, 0.95),
        0 10px 18px rgba(0, 0, 0, 1),
        0 0 0 1px rgba(255, 255, 255, 0.03);
      filter: brightness(0.98);
    }

    .deck-button::after {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      border: 1px solid rgba(255, 255, 255, 0.03);
      pointer-events: none;
    }

    .deck-button-edit-hint {
      position: absolute;
      top: 6px;
      right: 7px;
      font-size: 11px;
      padding: 2px 6px;
      border-radius: 999px;
      background: rgba(0, 0, 0, 0.68);
      color: var(--text-sub);
      border: 1px solid rgba(255, 255, 255, 0.06);
      opacity: 0;
      transform: translateY(-4px);
      transition: opacity 0.15s ease, transform 0.15s ease;
      pointer-events: none;
    }

    .app[data-edit-mode="true"] .deck-button-edit-hint {
      opacity: 1;
      transform: translateY(0);
    }

    .status-line {
      margin-top: 10px;
      font-size: 11px;
      color: var(--text-sub);
      opacity: 0.9;
      display: flex;
      justify-content: space-between;
      gap: 8px;
    }

    .status-line span {
      white-space: nowrap;
    }

    .status-line div {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
  </style>
</head>
<body>
  <div class="app" id="app" data-edit-mode="false">
    <div class="header">
      <div class="title-block">
        <div class="title">
          í–‰ì‚¬ ì»¨íŠ¸ë¡¤ íŒ¨ë„
          <span class="title-badge">LINK DECK</span>
        </div>
        <div class="subtitle">
          íì‹œíŠ¸ Â· ê¸°íšì•ˆ Â· êµ¬ê¸€ ë“œë¼ì´ë¸Œ Â· ìœ íŠœë¸Œ ë¼ì´ë¸Œ ë“± ìì£¼ ì“°ëŠ” ë§í¬ë¥¼ í•œ ë²ˆì— ëª¨ì•„ë‘ëŠ” í™”ë©´ì…ë‹ˆë‹¤.
        </div>
      </div>
      <div class="controls">
        <div class="pill">ìµœëŒ€ 10ê°œì˜ ë²„íŠ¼ Â· ë¸Œë¼ìš°ì €ì— ìë™ ì €ì¥</div>
        <button class="toggle-edit" id="toggleEdit" data-active="false">
          <span>í¸ì§‘ ëª¨ë“œ ì¼œê¸°</span>
        </button>
      </div>
    </div>

    <div class="deck" id="deck"></div>

    <div class="status-line">
      <div>
        <span>ğŸ’¡ í¸ì§‘ ëª¨ë“œ: ë²„íŠ¼ì„ ëˆŒëŸ¬ ì´ë¦„ Â· ë§í¬ë¥¼ ì„¤ì •í•˜ì„¸ìš”.</span>
      </div>
      <div>
        <span>âŒ˜/Ctrl + D â†’ ë¶ë§ˆí¬ ì¶”ì²œ</span>
      </div>
    </div>
  </div>

  <script>
    // ê¸°ë³¸ ìŠ¬ë¡¯ ìˆ˜ (10ê°œ)
    const SLOT_COUNT = 10;
    const STORAGE_KEY = "event-link-deck-v1";

    /**
     * ì €ì¥ëœ ë²„íŠ¼ ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°
     */
    function loadButtons() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) {
          return Array.from({ length: SLOT_COUNT }, () => ({
            label: "",
            url: "",
          }));
        }
        const parsed = JSON.parse(raw);
        // í˜¹ì‹œ ê°œìˆ˜ê°€ ë§ì§€ ì•Šìœ¼ë©´ ì¬ì¡°ì •
        const arr = Array.from({ length: SLOT_COUNT }, (_, i) => parsed[i] || { label: "", url: "" });
        return arr;
      } catch (e) {
        console.error("load error", e);
        return Array.from({ length: SLOT_COUNT }, () => ({
          label: "",
          url: "",
        }));
      }
    }

    /**
     * ë²„íŠ¼ ì •ë³´ ì €ì¥
     */
    function saveButtons(buttons) {
      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(buttons));
      } catch (e) {
        console.error("save error", e);
      }
    }

    /**
     * UI ë Œë”ë§
     */
    function renderButtons(buttons) {
      const deck = document.getElementById("deck");
      deck.innerHTML = "";

      buttons.forEach((btn, index) => {
        const hasUrl = Boolean(btn.url && btn.url.trim() !== "");

        const wrapper = document.createElement("div");
        wrapper.className = "deck-button" + (!hasUrl ? " deck-button-empty" : "");
        wrapper.dataset.index = index.toString();
        wrapper.dataset.hasUrl = hasUrl ? "true" : "false";

        const editHint = document.createElement("div");
        editHint.className = "deck-button-edit-hint";
        editHint.textContent = "í¸ì§‘";

        const inner = document.createElement("div");
        inner.className = "deck-button-inner";

        const label = document.createElement("div");
        label.className = "deck-button-label";
        label.textContent = btn.label.trim()
          ? btn.label
          : "ë¹ˆ ìŠ¬ë¡¯";

        inner.appendChild(label);
        wrapper.appendChild(inner);
        wrapper.appendChild(editHint);
        deck.appendChild(wrapper);

        // í´ë¦­/í„°ì¹˜ ì´ë²¤íŠ¸
        attachButtonHandlers(wrapper);
      });
    }

    /**
     * ë²„íŠ¼ ëˆŒë¦¬ëŠ” ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
     */
    function pressAnimation(el) {
      el.classList.add("deck-button-pressed");
      setTimeout(() => {
        el.classList.remove("deck-button-pressed");
      }, 90);
    }

    /**
     * ê°œë³„ ë²„íŠ¼ í•¸ë“¤ëŸ¬
     */
    function attachButtonHandlers(el) {
      const app = document.getElementById("app");

      function onClick(evt) {
        const index = Number(el.dataset.index);
        const buttons = loadButtons();
        const current = buttons[index];
        const isEditMode = app.dataset.editMode === "true";

        pressAnimation(el);

        if (isEditMode) {
          // í¸ì§‘ ëª¨ë“œ: ì´ë¦„ & URL ì„¤ì •
          const newLabel = prompt(
            `ë²„íŠ¼ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.\n(ì˜ˆ: íì‹œíŠ¸, ë©”ì¸ ê¸°íšì•ˆ, ìœ íŠœë¸Œ ë¼ì´ë¸Œ ë“±)`,
            current.label || ""
          );

          // ì·¨ì†Œí•˜ë©´ ì•„ë¬´ ê²ƒë„ í•˜ì§€ ì•ŠìŒ
          if (newLabel === null) return;

          const newUrl = prompt(
            `ì´ ë²„íŠ¼ì´ ì—°ê²°ë  ë§í¬(URL)ë¥¼ ì…ë ¥í•˜ì„¸ìš”.\n(ì˜ˆ: https:// ë˜ëŠ” http:// ë¡œ ì‹œì‘í•˜ëŠ” ì£¼ì†Œ)`,
            current.url || ""
          );

          if (newUrl === null) return;

          buttons[index] = {
            label: (newLabel || "").trim(),
            url: (newUrl || "").trim(),
          };
          saveButtons(buttons);
          renderButtons(buttons);
        } else {
          // ì¼ë°˜ ëª¨ë“œ: ë§í¬ ì—´ê¸°
          if (current.url && current.url.trim() !== "") {
            let urlToOpen = current.url.trim();
            // http/https ì—†ìœ¼ë©´ ìë™ìœ¼ë¡œ ë¶™ì—¬ì¤Œ (ë‹¨ìˆœ í¸ì˜)
            if (!/^https?:\/\//i.test(urlToOpen)) {
              urlToOpen = "https://" + urlToOpen;
            }
            window.open(urlToOpen, "_blank", "noopener");
          } else {
            alert("ì•„ì§ ì„¤ì •ë˜ì§€ ì•Šì€ ë²„íŠ¼ì…ë‹ˆë‹¤.\ní¸ì§‘ ëª¨ë“œë¥¼ ì¼  í›„ ë²„íŠ¼ì„ ëˆŒëŸ¬ ë§í¬ë¥¼ ì„¤ì •í•˜ì„¸ìš”.");
          }
        }
      }

      el.addEventListener("click", onClick);
    }

    /**
     * í¸ì§‘ ëª¨ë“œ í† ê¸€
     */
    function setupEditToggle() {
      const toggle = document.getElementById("toggleEdit");
      const app = document.getElementById("app");

      toggle.addEventListener("click", () => {
        const isActive = toggle.dataset.active === "true";
        const next = !isActive;
        toggle.dataset.active = next ? "true" : "false";
        app.dataset.editMode = next ? "true" : "false";
        toggle.querySelector("span").textContent = next ? "í¸ì§‘ ëª¨ë“œ ë„ê¸°" : "í¸ì§‘ ëª¨ë“œ ì¼œê¸°";
      });
    }

    // ì´ˆê¸° ì‹¤í–‰
    (function init() {
      const buttons = loadButtons();
      renderButtons(buttons);
      setupEditToggle();
    })();
  </script>
</body>
</html>
